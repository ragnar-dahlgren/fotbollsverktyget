<!DOCTYPE html>
<html lang="sv">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Design Labb - FINAL SPECIFICATION</title>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background: #f0f2f5;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }

        h1 {
            color: #333;
            margin-bottom: 10px;
        }

        .canvas-container {
            background: #333;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        canvas {
            background: #7cb342;
            /* Gr칛sgr칬n */
            cursor: default;
        }

        .controls {
            margin-top: 20px;
            background: white;
            padding: 20px;
            border-radius: 8px;
            width: 100%;
            max-width: 1000px;
        }

        code {
            background: #eee;
            padding: 2px 4px;
            border-radius: 3px;
        }
    </style>
</head>

<body>

    <h1>Design Labb: SLUTGILTIG SPECIFIKATION 游끥</h1>
    <p>Alla godk칛nda objekt (A1, A2, A3, B1, C1, C2, D4, E1, G6) med och utan markering.</p>

    <div class="canvas-container">
        <canvas id="labCanvas" width="800" height="1000"></canvas>
    </div>

    <div class="controls">
        <h3>Redo f칬r integration</h3>
        <p>Denna fil inneh친ller nu de "rena" ritfunktionerna f칬r varje objekt.</p>
        <ul>
            <li><code>drawSelection(ctx, x, y)</code> - Vit cirkel bakom markering.</li>
            <li><code>drawPlayer(...)</code> - Hanterar A1 (Vanlig), A2 (Nummer), A3 (Kapten) och B1 (M친lvakt).</li>
            <li><code>drawCoach(...)</code> - Hanterar C1 och C2.</li>
            <li><code>drawGoal(...)</code> - Hanterar D4.</li>
            <li><code>drawBall(...)</code> - Hanterar E1.</li>
            <li><code>drawCone(...)</code> - Hanterar G6.</li>
        </ul>
    </div>

    <script>
        const canvas = document.getElementById('labCanvas');
        const ctx = canvas.getContext('2d');

        // --- KONFIGURATION & F츿RGER ---
        const COLORS = {
            jersey: "#e74c3c",
            shorts: "#ffffff",
            socks: "#e74c3c",
            skin: "#ffdbac",
            shoes: "#1a1a1a",
            number: "#ffffff",
            selected: "rgba(255, 255, 255, 0.25)"
        };

        const CONE_COLORS = {
            body: "#fbc531", // Orange-Gul mix
            stroke: "black",
            hole: "black"
        };

        // --- DEFINIERADE OBJEKT (A-G) ---
        // Dessa konfigurationer kan kopieras direkt till verktyget
        const finalItems = [
            // SPELARE (A)
            {
                code: 'A1', label: 'Spelare', type: 'player',
                config: { arms: 'xslim', shadow: 'hard', shoes: 'black', pattern: 'none', number: false }
            },

            {
                code: 'A2', label: 'Spelare #', type: 'player',
                config: { arms: 'xslim', shadow: 'hard', shoes: 'black', pattern: 'none', number: true, jerseyNum: 2 }
            },

            {
                code: 'A3', label: 'Kapten', type: 'player',
                config: { arms: 'xslim', shadow: 'hard', shoes: 'black', pattern: 'stripe', number: false }
            },

            // M칀LVAKT (B1)
            {
                code: 'B1', label: 'M친lvakt', type: 'gk',
                config: { arms: 'long', shadow: 'hard', shoes: 'black', jersey: '#2ecc71', socks: '#2ecc71', gloves: 'small', number: true, jerseyNum: 1 }
            },

            // TR츿NARE (C)
            {
                code: 'C1', label: 'Tr칛nare V', type: 'coach',
                config: { style: 'polo', color: '#ecf0f1', pants: '#2c3e50' }
            },

            {
                code: 'C2', label: 'Tr칛nare S', type: 'coach',
                config: { style: 'polo', color: '#2c3e50', pants: '#bdc3c7' }
            },

            // M칀L (D4)
            {
                code: 'D4', label: 'M친l', type: 'goal',
                config: { join: 'round', net: 'thin', netAlpha: 0.2 }
            },

            // BOLL (E1)
            {
                code: 'E1', label: 'Boll', type: 'ball',
                config: { style: 'realistic' }
            },

            // KON (G6)
            {
                code: 'G6', label: 'Kon', type: 'cone',
                config: { color: CONE_COLORS.body, strokeColor: CONE_COLORS.stroke, holeColor: CONE_COLORS.hole, baseW: 14, topW: 6, height: 7 }
            }
        ];

        // --- RENDER LOOP ---
        function render() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            drawPitchDetails(ctx); // Bakgrund

            let rowY = 80;
            const col1X = 200; // Normal
            const col2X = 500; // Selected

            // Rubriker
            ctx.fillStyle = "white";
            ctx.font = "bold 20px Inter, sans-serif";
            ctx.textAlign = "center";
            ctx.fillText("Normal", col1X, 40);
            ctx.fillText("Markerad", col2X, 40);

            finalItems.forEach((item, index) => {
                // Rita Normal
                drawItemByType(ctx, col1X, rowY, item, false);

                // Rita Selected
                drawItemByType(ctx, col2X, rowY, item, true);

                // Etikett & Kod i mitten/v칛nster
                ctx.fillStyle = "#eee";
                ctx.font = "bold 14px Inter, sans-serif";
                ctx.textAlign = "right";
                ctx.fillText(item.code, col1X - 60, rowY + 5);
                ctx.font = "12px Inter, sans-serif";
                ctx.fillStyle = "#aaa";
                ctx.fillText(item.label, col1X - 60, rowY + 20);

                rowY += 100; // Avst친nd mellan rader
                if (item.type === 'goal') rowY += 40; // Extra plats f칬r m친let
            });
        }

        function drawItemByType(ctx, x, y, item, isSelected) {
            if (isSelected) {
                drawSelection(ctx, x, y);
            }

            if (item.type === 'player' || item.type === 'gk') {
                drawPlayer(ctx, x, y, item.config);
            } else if (item.type === 'coach') {
                drawCoach(ctx, x, y, item.config);
            } else if (item.type === 'goal') {
                drawGoal(ctx, x, y, item.config);
            } else if (item.type === 'ball') {
                drawBall(ctx, x, y, item.config.style);
            } else if (item.type === 'cone') {
                drawCone(ctx, x, y, item.config);
            }
        }

        function drawPitchDetails(ctx) {
            ctx.strokeStyle = "rgba(255,255,255,0.1)";
            ctx.lineWidth = 2;
            ctx.beginPath(); ctx.moveTo(canvas.width / 2, 0); ctx.lineTo(canvas.width / 2, canvas.height); ctx.stroke();
            ctx.beginPath(); ctx.arc(canvas.width / 2, canvas.height / 2, 80, 0, Math.PI * 2); ctx.stroke();
        }

        // --- HELPER FUNCTIONS ---
        function roundRect(ctx, x, y, w, h, r) {
            if (w < 2 * r) r = w / 2;
            if (h < 2 * r) r = h / 2;
            ctx.beginPath();
            ctx.moveTo(x + r, y);
            ctx.arcTo(x + w, y, x + w, y + h, r);
            ctx.arcTo(x + w, y + h, x, y + h, r);
            ctx.arcTo(x, y + h, x, y, r);
            ctx.arcTo(x, y, x + w, y, r);
            ctx.closePath();
        }

        // =========================================================
        // ===            FINAL DRAWING FUNCTIONS                ===
        // =========================================================

        /**
         * Ritar markeringscirkeln (anv칛nds f칬r alla objekt vid hover/selection)
         */
        function drawSelection(ctx, x, y) {
            ctx.save();
            ctx.translate(x, y);
            const scale = 2.0;
            ctx.scale(scale, scale);
            ctx.fillStyle = COLORS.selected;
            ctx.beginPath();
            ctx.arc(0, 0, 14, 0, Math.PI * 2);
            ctx.fill();
            ctx.restore();
        }

        /**
         * Ritar Konen (G6 - The Chosen One)
         */
        function drawCone(ctx, x, y, config) {
            ctx.save();
            ctx.translate(x, y);
            const scale = 2.0;
            ctx.scale(scale, scale);

            const h = config.height || 7;
            const topY = -h / 2;
            const baseY = h / 2;
            const topW = config.topW || 6;
            const baseW = config.baseW || 14;

            // Huvudkropp (Fyllning)
            ctx.fillStyle = config.color;
            ctx.beginPath();
            ctx.moveTo(-topW / 2, topY);
            // Baksidan av toppen (ellipse) f칬r korrekt fyllning
            ctx.ellipse(0, topY, topW / 2, 1.5, 0, Math.PI, 0);
            ctx.lineTo(baseW / 2, baseY);
            // Bottenkurva
            ctx.ellipse(0, baseY, baseW / 2, 2.5, 0, 0, Math.PI);
            ctx.lineTo(-baseW / 2, baseY);
            ctx.closePath();
            ctx.fill();

            // Toppytan (Highlight)
            ctx.fillStyle = "rgba(255,255,255,0.2)";
            ctx.beginPath();
            ctx.ellipse(0, topY, topW / 2, 1.5, 0, 0, Math.PI * 2);
            ctx.fill();

            // H친let i toppen (Svart)
            ctx.fillStyle = config.holeColor || "black";
            ctx.beginPath();
            ctx.ellipse(0, topY, (topW / 2) * 0.6, 1.5 * 0.6, 0, 0, Math.PI * 2);
            ctx.fill();

            // Konturer (Svart outline runt allt)
            ctx.strokeStyle = config.strokeColor || "black";
            ctx.lineWidth = config.strokeWidth || 0.5;

            ctx.beginPath();
            ctx.moveTo(-topW / 2, topY); // Start Top-Left
            ctx.lineTo(-baseW / 2, baseY); // Down to Base-Left
            // Base Curve (Left -> Right via Bottom)
            ctx.ellipse(0, baseY, baseW / 2, 2.5, 0, Math.PI, 0, true);
            ctx.lineTo(topW / 2, topY); // Up to Top-Right
            // Top Curve (Right -> Left via Top/Back)
            ctx.ellipse(0, topY, topW / 2, 1.5, 0, 0, Math.PI, true);
            ctx.stroke();

            ctx.restore();
        }

        /**
         * Ritar Spelare och M친lvakt (A1-A3, B1)
         */
        function drawPlayer(ctx, x, y, config) {
            ctx.save();
            try {
                ctx.translate(x, y);
                const scale = 2.0;
                ctx.scale(scale, scale);

                // SKUGGA
                if (config.shadow === 'hard') {
                    ctx.save();
                    ctx.translate(2, 2);
                    ctx.fillStyle = "rgba(0,0,0,0.2)";
                    roundRect(ctx, -4, -6, 8, 12, 1.5); ctx.fill(); // Kropp
                    ctx.beginPath(); ctx.arc(0, -10, 3.5, 0, Math.PI * 2); ctx.fill(); // Huvud
                    ctx.fillRect(-6.5, -5, 1.5, 4); ctx.fillRect(5, -5, 1.5, 4); // Armar
                    ctx.fillRect(-3.5, 6, 3, 10); ctx.fillRect(0.5, 6, 3, 10); // Ben
                    ctx.restore();
                }

                // KROPP (Tr칬ja)
                const bodyY = -6; const bodyW = 8; const bodyH = 12;
                ctx.fillStyle = config.jersey || COLORS.jersey;
                roundRect(ctx, -bodyW / 2, bodyY, bodyW, bodyH, 1.5);
                ctx.fill();

                // S칐MMAR / M칐NSTER
                if (config.pattern === 'stripe') {
                    ctx.save(); ctx.clip();
                    ctx.fillStyle = "rgba(0,0,0,0.15)";
                    for (let i = -10; i < 10; i += 3) ctx.fillRect(i, -10, 1.5, 25);
                    ctx.restore();
                }

                // HUVUD
                ctx.fillStyle = COLORS.skin;
                ctx.beginPath(); ctx.arc(0, -10, 3.5, 0, Math.PI * 2); ctx.fill();

                // ARMAR
                ctx.fillStyle = config.jersey || COLORS.jersey;
                let armW = 1.5; let armH = 4; const armX = 5; const armY = -5;
                if (config.arms === 'long') armH = 9;

                // 츿rmar (Tr칬jf칛rg)
                ctx.fillRect(-armX - armW, armY, armW, armH);
                ctx.fillRect(armX, armY, armW, armH);

                // Underarmar (Hud) - om kort칛rmat
                if (config.arms !== 'long') {
                    ctx.fillStyle = COLORS.skin;
                    ctx.fillRect(-armX - armW, armY + armH, armW, 5);
                    ctx.fillRect(armX, armY + armH, armW, 5);
                }

                // HANDSKAR (M친lvakt)
                if (config.gloves) {
                    ctx.fillStyle = "#ffffff";
                    const gloveSize = 2.0;
                    const gY = armY + armH + (config.arms === 'long' ? 0 : 5);
                    ctx.beginPath(); ctx.arc(-armX - armW / 2, gY, gloveSize, 0, Math.PI * 2); ctx.fill();
                    ctx.beginPath(); ctx.arc(armX + armW / 2, gY, gloveSize, 0, Math.PI * 2); ctx.fill();
                }

                // SHORTS
                const legY = 6; const shortsH = 5;
                ctx.fillStyle = COLORS.shorts;
                ctx.fillRect(-3.5, legY, 3, shortsH);
                ctx.fillRect(0.5, legY, 3, shortsH);

                // STRUMPOR
                ctx.fillStyle = config.socks || COLORS.socks;
                ctx.fillRect(-3.5, legY + shortsH, 3, 5);
                ctx.fillRect(0.5, legY + shortsH, 3, 5);

                // SKOR
                ctx.fillStyle = config.shoes || "#1a1a1a";
                const shoeY = legY + shortsH + 5;
                // V칛nster sko
                ctx.beginPath(); ctx.moveTo(-3.5, shoeY); ctx.lineTo(-0.5, shoeY); ctx.lineTo(-0.5, shoeY + 2);
                ctx.quadraticCurveTo(-2, shoeY + 3, -3.5, shoeY + 2); ctx.fill();
                // H칬ger sko
                ctx.beginPath(); ctx.moveTo(0.5, shoeY); ctx.lineTo(3.5, shoeY); ctx.lineTo(3.5, shoeY + 2);
                ctx.quadraticCurveTo(2, shoeY + 3, 0.5, shoeY + 2); ctx.fill();

                // NUMMER
                if (config.number) {
                    ctx.fillStyle = COLORS.number;
                    const size = 6;
                    ctx.font = `bold ${size}px Arial`;
                    ctx.textAlign = "center";
                    ctx.textBaseline = "middle";
                    const num = config.jerseyNum !== undefined ? config.jerseyNum : 0;
                    ctx.fillText(num, 0, -1);
                }
            } finally {
                ctx.restore();
            }
        }

        /**
         * Ritar Tr칛nare (C1, C2)
         */
        function drawCoach(ctx, x, y, config) {
            ctx.save();
            ctx.translate(x, y);
            const scale = 2.0;
            ctx.scale(scale, scale);

            // Kropp (Tr칬ja/Polo)
            ctx.fillStyle = config.color;
            roundRect(ctx, -5, -6, 10, 12, 1.5); ctx.fill();

            // Huvud
            ctx.fillStyle = COLORS.skin;
            ctx.beginPath(); ctx.arc(0, -10, 3.5, 0, Math.PI * 2); ctx.fill();

            // Byxor
            ctx.fillStyle = config.pants;
            ctx.fillRect(-4, 6, 3.5, 10);
            ctx.fillRect(0.5, 6, 3.5, 10);
            ctx.restore();
        }

        /**
         * Ritar Boll (E1)
         */
        function drawBall(ctx, x, y, style) {
            ctx.save();
            ctx.translate(x, y);
            const scale = 3.0;
            ctx.scale(scale, scale);

            // Skugga
            ctx.fillStyle = "rgba(0,0,0,0.2)";
            ctx.beginPath(); ctx.arc(1, 1, 3.5, 0, Math.PI * 2); ctx.fill();

            // Grundboll
            ctx.fillStyle = "white";
            ctx.beginPath(); ctx.arc(0, 0, 3.5, 0, Math.PI * 2); ctx.fill();

            // Outline
            ctx.strokeStyle = "#333";
            ctx.lineWidth = 0.5;
            ctx.stroke();

            // Realistic shading overlay
            if (style === 'realistic') {
                const grad = ctx.createRadialGradient(-1, -1, 0, 0, 0, 4);
                grad.addColorStop(0, "rgba(255,255,255,0.8)");
                grad.addColorStop(1, "rgba(0,0,0,0.1)");
                ctx.fillStyle = grad;
                ctx.beginPath(); ctx.arc(0, 0, 3.5, 0, Math.PI * 2); ctx.fill();
            }
            ctx.restore();
        }

        /**
         * Ritar M친l (D4)
         */
        function drawGoal(ctx, x, y, config) {
            ctx.save();
            ctx.translate(x, y);
            const scale = 2.0;
            ctx.scale(scale, scale);

            const w = 30; const h_top = 10; const depth = 10;
            const topY = -h_top; const bottomY = 0; const backOffset = -depth;
            const bx1 = -w / 2; const bx2 = w / 2;
            const by1 = topY + backOffset; const by2 = bottomY + backOffset;

            // N칛t (Bakre del)
            ctx.strokeStyle = `rgba(255,255,255,${config.netAlpha || 0.2})`;
            ctx.lineWidth = 1;
            ctx.beginPath();
            // Ram bak
            ctx.moveTo(-w / 2, topY); ctx.lineTo(bx1, by1); ctx.lineTo(bx2, by1); ctx.lineTo(w / 2, topY);
            ctx.moveTo(-w / 2, topY); ctx.lineTo(bx1, by1); ctx.lineTo(bx1, by2); ctx.lineTo(-w / 2, bottomY);
            ctx.moveTo(w / 2, topY); ctx.lineTo(bx2, by1); ctx.lineTo(bx2, by2); ctx.lineTo(w / 2, bottomY);
            ctx.stroke();

            // N칛tm칬nster
            if (config.net === 'thin') {
                ctx.lineWidth = 0.5;
                ctx.beginPath();
                // Vertikala tr친dar
                for (let i = bx1; i <= bx2; i += 4) { ctx.moveTo(i, by1); ctx.lineTo(i, by2); }
                ctx.stroke();
                ctx.beginPath();
                // Horisontella tr친dar
                for (let i = by1; i <= by2; i += 4) { ctx.moveTo(bx1, i); ctx.lineTo(bx2, i); }
                ctx.stroke();
            }

            // Fr칛mre Ram (Stolpar och ribba)
            ctx.strokeStyle = "white";
            ctx.lineCap = "butt";
            ctx.lineJoin = config.join || 'round';
            ctx.lineWidth = config.thickness || 2.5;
            ctx.beginPath();
            ctx.moveTo(-w / 2, bottomY);
            ctx.lineTo(-w / 2, topY);
            ctx.lineTo(w / 2, topY);
            ctx.lineTo(w / 2, bottomY);
            ctx.stroke();
            ctx.restore();
        }

        render();
    </script>
</body>

</html>